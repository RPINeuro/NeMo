\hypertarget{synapse_8c_source}{}\section{synapse.\+c}
\label{synapse_8c_source}\index{/home/mplagge/development/tnt\+\_\+benchmark/models/synapse.\+c@{/home/mplagge/development/tnt\+\_\+benchmark/models/synapse.\+c}}

\begin{DoxyCode}
00001 \textcolor{comment}{//}
00002 \textcolor{comment}{//  synapse.c}
00003 \textcolor{comment}{//  ROSS\_TOP}
00004 \textcolor{comment}{//}
00005 \textcolor{comment}{//  Created by Mark Plagge on 6/18/15.}
00006 \textcolor{comment}{//}
00007 \textcolor{comment}{//}
00008 
00009 \textcolor{preprocessor}{#include "\hyperlink{synapse_8h}{synapse.h}"}
00010 
\hypertarget{synapse_8c_source_l00011}{}\hyperlink{synapse_8h_a751f7a42bfc55f55fc0fd299165c5906}{00011} \textcolor{keywordtype}{void} \hyperlink{synapse_8c_a751f7a42bfc55f55fc0fd299165c5906}{synapseReceiveMessage}(\hyperlink{structsynapse_state}{synapseState} *st, 
      \hyperlink{struct_msg___data}{Msg\_Data} *M, tw\_lp *lp) \{
00012     \textcolor{keywordtype}{long} start\_count = lp->rng->count;
00013     tw\_stime time;
00014     st->\hyperlink{structsynapse_state_a7d208d07285a221f4ef19f6fa307b536}{msgSent} ++;
00015 
00016     time = \hyperlink{assist_8c_a30602b11dbfa6bcb90dc00e7942cfb02}{getNextEventTime}(lp);
00017     tw\_event *newEvent = tw\_event\_new(st->\hyperlink{structsynapse_state_a0710dca002b4b3a3f7ae72633bef3691}{destNeuron}, time, lp);
00018     \hyperlink{struct_msg___data}{Msg\_Data} *data = (\hyperlink{struct_msg___data}{Msg\_Data} * ) tw\_event\_data(newEvent);
00019     data->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType} = \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a6ad6b93d8a818550e7246f6e0d143afb}{SYNAPSE\_OUT};
00020     tw\_event\_send(newEvent);
00021 
00022         \textcolor{comment}{//check to see if this is the last synapse:}
00023     \textcolor{keywordflow}{if}(st->\hyperlink{structsynapse_state_ab73db495221608d3eae73d51670d29f0}{mySynapseNum} < \hyperlink{assist_8h_a67e8e45768f76b984a60fcff2b7c51aa}{NEURONS\_IN\_CORE}) \{
00024             time = \hyperlink{assist_8c_a30602b11dbfa6bcb90dc00e7942cfb02}{getNextEventTime}(lp);
00025             tw\_event *newEvent = tw\_event\_new(st->\hyperlink{structsynapse_state_a665999819b255f36d756f17b85bc9a03}{destSynapse}, time, lp);
00026             \hyperlink{struct_msg___data}{Msg\_Data} *data = (\hyperlink{struct_msg___data}{Msg\_Data} * ) tw\_event\_data(newEvent);
00027             data->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType} = \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a6ad6b93d8a818550e7246f6e0d143afb}{SYNAPSE\_OUT};
00028             tw\_event\_send(newEvent);
00029         st->\hyperlink{structsynapse_state_a7d208d07285a221f4ef19f6fa307b536}{msgSent} ++;
00030         \}
00031 
00032 
00033 
00034 
00035 
00036 
00037     M->\hyperlink{struct_msg___data_a2e49a6bcc6c45ade722f746b1ea707f2}{rndCallCount} = lp->rng->count - start\_count;
00038 
00039 \}
\hypertarget{synapse_8c_source_l00040}{}\hyperlink{synapse_8h_a8f9aab389278863b114c27bc10257864}{00040} \textcolor{keywordtype}{void} \hyperlink{synapse_8c_a8f9aab389278863b114c27bc10257864}{synapseReverseState}(\hyperlink{structsynapse_state}{synapseState} *st, 
      \hyperlink{struct_msg___data}{Msg\_Data} *M, tw\_lp *lp) \{
00041     \textcolor{keywordflow}{if}(st->\hyperlink{structsynapse_state_ab73db495221608d3eae73d51670d29f0}{mySynapseNum} < \hyperlink{assist_8h_a67e8e45768f76b984a60fcff2b7c51aa}{NEURONS\_IN\_CORE}) \{
00042         st->\hyperlink{structsynapse_state_a7d208d07285a221f4ef19f6fa307b536}{msgSent} --;
00043     \}
00044     \textcolor{keywordtype}{long} count = M->\hyperlink{struct_msg___data_a2e49a6bcc6c45ade722f746b1ea707f2}{rndCallCount};
00045     \textcolor{keywordflow}{while} (count--) \{
00046         tw\_rand\_reverse\_unif(lp->rng);
00047     \}
00048 
00049 \}
\end{DoxyCode}
